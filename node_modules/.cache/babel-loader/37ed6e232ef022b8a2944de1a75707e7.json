{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-696c6c54\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"item-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Detalle\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Films\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Naves\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"h3\", null, _toDisplayString($setup.name) + \" //\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.objEntries, (entry, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [entry[0] != 'pilots' && entry[0] != 'films' && entry[0] != 'created' && entry[0] != 'edited' && entry[0] != 'url' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString(entry[0]) + \": \" + _toDisplayString(entry[1]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.films.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_hoisted_5, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.films, (url, index) => {\n    return _openBlock(), _createBlock($setup[\"Films\"], {\n      key: index,\n      url: url\n    }, null, 8 /* PROPS */, [\"url\"]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), $setup.navesUrls.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_hoisted_7, $setup.isShipLoaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.navesData, (item, index) => {\n    return _openBlock(), _createBlock($setup[\"NavesList\"], {\n      key: index,\n      name: item.name,\n      model: item.model\n    }, null, 8 /* PROPS */, [\"name\", \"model\"]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.navesData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, _toDisplayString(item.name) + \" - \" + _toDisplayString(item.model), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])]))])) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EAkESA,KAAK,EAAC;AAAgB;gEACzBC,oBAAgB,YAAZ,SAAO;;;;;;;gEAOPA,oBAAc,YAAV,OAAK;;;;gEAITA,oBAAc,YAAV,OAAK;;;;;;;;6DAbfA,oBAAoB,6BAAdC,WAAI,IAAE,KAAG,iBACfD,oBAsBM,OAtBNE,UAsBM,GArBJC,UAAgB,qBACdC,oBAIMC,6BAJwBJ,iBAAU,GAA3BK,KAAK,EAAEC,KAAK;yBAAzBH,oBAIM;MAJqCI,GAAG,EAAED;IAAK,IACxCD,KAAK,mBAAiBA,KAAK,kBAAgBA,KAAK,oBAAkBA,KAAK,mBAAiBA,KAAK,8BAAxGF,oBAEM,oCADFE,KAAK,OAAK,IAAE,oBAAEA,KAAK;kCAGdL,YAAK,CAACQ,MAAM,sBAAvBL,oBAGM,oBAFJM,UAAc,qBACdN,oBAA+DC,6BAAjCJ,YAAK,GAApBU,GAAG,EAAEJ,KAAK;yBAAzBK,aAA+DX;MAAzBO,GAAG,EAAED,KAAK;MAAGI,GAAG,EAAEA;;yEAE/CV,gBAAS,CAACQ,MAAM,sBAA3BL,oBAUM,oBATJS,UAAc,EACHZ,mBAAY,kBAAvBG,oBAEM,uCADJA,oBAAmGC,6BAAhEJ,gBAAS,GAAzBa,IAAI,EAAEP,KAAK;yBAA9BK,aAAmGX;MAApDO,GAAG,EAAED,KAAK;MAAGQ,IAAI,EAAED,IAAI,CAACC,IAAI;MAAGC,KAAK,EAAEF,IAAI,CAACE;;qDAE5FZ,oBAIM,oBAHJJ,oBAEK,gCADHI,oBAAuFC,6BAA3DJ,gBAAS,GAAzBa,IAAI,EAAEP,KAAK;yBAAvBH,oBAAuF;MAA/CI,GAAG,EAAED;IAAK,oBAAIO,IAAI,CAACC,IAAI,IAAE,KAAG,oBAAED,IAAI,CAACE,KAAK","names":["class","_createElementVNode","$setup","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","entry","index","key","length","_hoisted_5","url","_createBlock","_hoisted_7","item","name","model"],"sourceRoot":"","sources":["C:\\Users\\User01\\Documents\\ITAcademy\\Vue\\sprint8\\starwars\\src\\views\\PersonView.vue"],"sourcesContent":["<script setup>\n// @ is an alias to /src\nimport { ref } from 'vue'\nimport { useRoute,useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport Films from '@/components/Films.vue'\nimport NavesList from '@/components/NavesList.vue'\n// import NaveFile from '@/components/NaveFile.vue'\n\nconst route = useRoute()\nconst router=useRouter()\nconst store = useStore()\n\nif (store.getters.countPeople==0){\n  router.push({name:'people'});//si accede directo o reload, redirect a listado (porque no tenemos propiedad id para hacer fetch a url específica de nave)\n}\n\nlet isShipLoaded=ref(false);\n\nconst name=ref(route.params.name);\nconst dataObj=store.state.people.find(item=>item.name==name.value)\nconst objEntries=ref([]);\n\nObject.entries(dataObj).forEach((item)=>{\n  if (item[0]!='species' && item[0]!='starships' && item[0]!='films' && item[0]!='homeworld' && item[0]!='vehicles' && item[0]!='created' && item[0]!='edited' && item[0]!='url'){\n  let name=item[0].charAt(0).toUpperCase() + item[0].slice(1).replaceAll(\"_\", \" \");\n  let value=item[1].charAt(0).toUpperCase() + item[1].slice(1);\n  objEntries.value.push([name, value]);\n  }\n})\n\nconst films=dataObj.films;\n\nconst navesUrls=dataObj.starships;\nconst navesData=ref([]);\n\nif (navesUrls.length>0){\nnavesUrls.forEach (url=> {\n  if (store.getters.countShips>0 && store.state.ships.some(item=>item.url==url)){\n    let naveFound=store.state.ships.find(item=>item.url==url);\n    navesData.value.push({name: naveFound.name, model:naveFound.model});\n    isShipLoaded.value=true;\n  } else{\n    const request = fetch(url);\n    request.then( response => {\n              if (!response.ok) {\n                throw response.status\n             \n              } else{\n                return response.json()\n              }\n              })\n            .then(json => {\n              navesData.value.push({name: json.name, model:json.model});\n            })\n            .catch((error) => {\n              console.log('Ocurrió un error: ', error)\n            });\n  }\n  \n})\n}\n\n</script>\n<template>\n    <h3>{{name}} //</h3>\n    <div class=\"item-container\">\n      <h4>Detalle</h4>\n        <div v-for=\"(entry, index) in objEntries\" :key=\"index\">\n          <div v-if=\"entry[0]!='pilots' && entry[0]!='films' && entry[0]!='created' && entry[0]!='edited' && entry[0]!='url'\">\n            {{entry[0]}}: {{entry[1]}}\n          </div>\n        </div>\n        <div v-if=\"films.length>0\">\n          <h3>Films</h3>\n          <Films v-for=\"(url, index) in films\" :key=\"index\" :url=\"url\" />\n        </div>\n        <div v-if=\"navesUrls.length>0\">\n          <h3>Naves</h3>\n          <div v-if=\"isShipLoaded\">\n            <NavesList v-for=\"(item, index) in navesData\" :key=\"index\" :name=\"item.name\" :model=\"item.model\" />\n          </div>\n          <div v-else>\n            <ul>\n              <li v-for=\"(item, index) in navesData\" :key=\"index\">{{item.name}} - {{item.model}}</li>\n            </ul>\n          </div>\n        </div>\n    </div>\n</template>\n\n\n<style scoped>\n.item-container{\n  background-color: #1c1b1b;\n  width: 50%;\n  padding: 1.5rem;\n  margin: 1rem auto;\n  text-align: left;\n}\n.item-property{\n  font-weight: bold;\n}\nul{\n  margin-top:0;\n}\nli::marker {\n\tcolor: #f9d81cda;\n}\nh3{\n  color: #f9d81cda;\n}\nh4{\n  margin-bottom: 0.4rem;\n  font-style: italic;\n  color: #f9d81cda;\n  border-bottom: #f9d81cda;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}