{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createVNode as _createVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-696c6c54\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"item-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Detalle\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"item-property\"\n};\nconst _hoisted_4 = {\n  class: \"item-value\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Films\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Naves\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"h3\", null, _toDisplayString($setup.name) + \" //\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.objEntries, (entry, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, [_createElementVNode(\"span\", _hoisted_3, _toDisplayString(entry[0]) + \":\", 1 /* TEXT */), _createTextVNode(), _createElementVNode(\"span\", _hoisted_4, _toDisplayString(entry[1]), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))]), $setup.films.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.films, (url, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, [_createVNode($setup[\"Films\"], {\n      url: url\n    }, null, 8 /* PROPS */, [\"url\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), $setup.navesUrls.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_hoisted_8, $setup.isShipLoaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.navesData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, [_createVNode($setup[\"NavesList\"], {\n      name: item.name,\n      model: item.model\n    }, null, 8 /* PROPS */, [\"name\", \"model\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.navesData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, _toDisplayString(item.name) + \" - \" + _toDisplayString(item.model), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])]))])) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EAkESA,KAAK,EAAC;AAAgB;gEACzBC,oBAAgB,YAAZ,SAAO;;EAGHD,KAAK,EAAC;AAAe;;EAA4BA,KAAK,EAAC;AAAY;;;;gEAIvEC,oBAAc,YAAV,OAAK;;;;gEAMTA,oBAAc,YAAV,OAAK;;;;;;;;6DAffA,oBAAoB,6BAAdC,WAAI,IAAE,KAAG,iBACfD,oBA0BM,OA1BNE,UA0BM,GAzBJC,UAAgB,EAChBH,oBAIK,gCAHHI,oBAEGC,6BAF0BJ,iBAAU,GAA3BK,KAAK,EAAEC,KAAK;yBAAxBH,oBAEG;MAFuCI,GAAG,EAAED;IAAK,IACpDP,oBAAgD,QAAhDS,UAAgD,mBAAlBH,KAAK,OAAK,GAAC,qCAAQN,oBAA4C,QAA5CU,UAA4C,mBAAjBJ,KAAK;oCAGtEL,YAAK,CAACU,MAAM,sBAAvBP,oBAKM,oBAJJQ,UAAc,EACdZ,oBAEK,gCADHI,oBAAwEC,6BAA7CJ,YAAK,GAApBY,GAAG,EAAEN,KAAK;yBAAtBH,oBAAwE;MAArCI,GAAG,EAAED;IAAK,IAAEO,aAAoBb;MAAZY,GAAG,EAAEA;IAAG;2EAGxDZ,gBAAS,CAACU,MAAM,sBAA3BP,oBAYM,oBAXJW,UAAc,EACHd,mBAAY,kBAAvBG,oBAIM,oBAHJJ,oBAEK,gCADHI,oBAA4GC,6BAAhFJ,gBAAS,GAAzBe,IAAI,EAAET,KAAK;yBAAvBH,oBAA4G;MAApEI,GAAG,EAAED;IAAK,IAAEO,aAAmDb;MAAvCgB,IAAI,EAAED,IAAI,CAACC,IAAI;MAAGC,KAAK,EAAEF,IAAI,CAACE;;uDAGlGd,oBAIM,qBAHJJ,oBAEK,gCADHI,oBAAuFC,6BAA3DJ,gBAAS,GAAzBe,IAAI,EAAET,KAAK;yBAAvBH,oBAAuF;MAA/CI,GAAG,EAAED;IAAK,oBAAIS,IAAI,CAACC,IAAI,IAAE,KAAG,oBAAED,IAAI,CAACE,KAAK","names":["class","_createElementVNode","$setup","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","entry","index","key","_hoisted_3","_hoisted_4","length","_hoisted_6","url","_createVNode","_hoisted_8","item","name","model"],"sourceRoot":"","sources":["C:\\Users\\User01\\Documents\\ITAcademy\\Vue\\sprint8\\starwars\\src\\views\\PersonView.vue"],"sourcesContent":["<script setup>\n// @ is an alias to /src\nimport { ref } from 'vue'\nimport { useRoute,useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport Films from '@/components/Films.vue'\nimport NavesList from '@/components/NavesList.vue'\n// import NaveFile from '@/components/NaveFile.vue'\n\nconst route = useRoute()\nconst router=useRouter()\nconst store = useStore()\n\nif (store.getters.countPeople==0){\n  router.push({name:'people'});//si accede directo o reload, redirect a listado (porque no tenemos propiedad id para hacer fetch a url específica de nave)\n}\n\nlet isShipLoaded=ref(false);\n\nconst name=ref(route.params.name);\nconst dataObj=store.state.people.find(item=>item.name==name.value)\nconst objEntries=ref([]);\n\nObject.entries(dataObj).forEach((item)=>{\n  if (item[0]!='name' && item[0]!='species' && item[0]!='starships' && item[0]!='films' && item[0]!='homeworld' && item[0]!='vehicles' && item[0]!='created' && item[0]!='edited' && item[0]!='url'){\n  let name=item[0].charAt(0).toUpperCase() + item[0].slice(1).replaceAll(\"_\", \" \");\n  let value=item[1].charAt(0).toUpperCase() + item[1].slice(1);\n  objEntries.value.push([name, value]);\n  }\n})\n\nconst films=dataObj.films;\n\nconst navesUrls=dataObj.starships;\nconst navesData=ref([]);\n\nif (navesUrls.length>0){\nnavesUrls.forEach (url=> {\n  if (store.getters.countShips>0 && store.state.ships.some(item=>item.url==url)){\n    let naveFound=store.state.ships.find(item=>item.url==url);\n    navesData.value.push({name: naveFound.name, model:naveFound.model});\n    isShipLoaded.value=true;\n  } else{\n    const request = fetch(url);\n    request.then( response => {\n              if (!response.ok) {\n                throw response.status\n             \n              } else{\n                return response.json()\n              }\n              })\n            .then(json => {\n              navesData.value.push({name: json.name, model:json.model});\n            })\n            .catch((error) => {\n              console.log('Ocurrió un error: ', error)\n            });\n  }\n  \n})\n}\n\n</script>\n<template>\n    <h3>{{name}} //</h3>\n    <div class=\"item-container\">\n      <h4>Detalle</h4>\n      <ul>\n        <li v-for=\"(entry, index) in objEntries\" :key=\"index\">\n        <span class=\"item-property\">{{entry[0]}}:</span> <span class=\"item-value\">{{entry[1]}}</span>\n      </li>\n      </ul>\n        <div v-if=\"films.length>0\">\n          <h4>Films</h4>\n          <ul>\n            <li v-for=\"(url, index) in films\" :key=\"index\"><Films :url=\"url\" /></li>\n          </ul>\n        </div>\n        <div v-if=\"navesUrls.length>0\">\n          <h4>Naves</h4>\n          <div v-if=\"isShipLoaded\">\n            <ul>\n              <li v-for=\"(item, index) in navesData\" :key=\"index\"><NavesList :name=\"item.name\" :model=\"item.model\" /></li>\n            </ul>\n          </div>\n          <div v-else>\n            <ul>\n              <li v-for=\"(item, index) in navesData\" :key=\"index\">{{item.name}} - {{item.model}}</li>\n            </ul>\n          </div>\n        </div>\n    </div>\n</template>\n\n\n<style scoped>\n.item-container{\n  background-color: #1c1b1b;\n  width: 50%;\n  padding: 1.5rem;\n  margin: 1rem auto;\n  text-align: left;\n}\n.item-property{\n  font-weight: bold;\n}\nul{\n  margin-top:0;\n}\nli::marker {\n\tcolor: #f9d81cda;\n}\nh3{\n  color: #f9d81cda;\n}\nh4{\n  margin-bottom: 0.4rem;\n  font-style: italic;\n  color: #f9d81cda;\n  border-bottom: #f9d81cda;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}